## 自动处理
见processing/process_years.bat，修改其年份为处理的年份即可，注意数据放在data目录下，我已经放置了一个2019年的方便测试

## 手动处理

### 步骤1：启用调试模式（推荐首次运行）

```powershell
cd processing
$env:PREPROCESS_SKIP_IQR = "1"     # 跳过 IQR，改用简单分位剪裁
$env:PREPROCESS_DEBUG = "0"        # 关闭调试输出
$env:PREPROCESS_ALLOW_DISK_FALLBACK = "1"
```

### 步骤2：提取数据

```powershell
# 进入处理目录
cd processing
#测试处理环境（注意默认测试的目录是data/2019下的）
python test_single_file.py
#进行省市映射，日粒度聚合
python run_pipeline.py extract --base-path data --year 2018 --granularity city --workers 4 --aggregate-mean 2>&1


# 不映射，日粒度聚合（可以不运行）
python run_pipeline.py extract --base-path ..\data --year 2018 --granularity grid --workers 4 --no-mapping 
```